{"version":3,"file":"main.js","sources":["../../util/randomization.js","../../templates/view-model.js","../../templates/about/view-model.js","../../templates/autoloader.js"],"sourcesContent":["\nexport default class Randomization {\n\n    /**\n     * Returns a whole random number in-between or at \"min\" and \"max\" values.\n     * @param {Number} min\n     * @param {Number} max\n     * @returns {Number}\n     */\n    static number(min, max) {\n        let n = Math.round(Math.random() * (max + 1 - min) + min);\n        n = n > max ? max : n;\n        n = n < min ? min : n;\n        return n;\n    }\n\n    static newid() {\n        return Randomization.number(1000000, 9999999).toString() +\n            Math.round(new Date().getTime() * 10000 * Math.random()).toString();\n    }\n}","import Randomization from '../util/randomization.js';\n\n/**\n * This is an abstract (non-initializable) class definition to be extended by an implementing view model class.\n */\nexport default class ViewModel {\n\n    /**\n     * Constructs a ViewModel object, should only be called by an extending class via 'super'.\n     */\n    constructor() {\n        //validated\n        if (new.target === ViewModel) {\n            throw new Error('ViewModel is an abstract class and should not be initiated alone.');\n        } else if (typeof this.constructor.init !== 'function') {\n            throw new Error('Static function \"init\" must be implemented on the extending class.');\n        } else if (typeof this.render !== 'function') {\n            throw new Error('Function \"render\" must be implemented on the extending class.');\n        }\n        this.id = ViewModel.newid();\n        this.parent = null;\n        this.children = [];\n        this.element = null;\n        //setup events and listeners\n        if (window && window.document) {\n            //fire render when the DOM is ready\n            var self = this;\n            document.addEventListener(\"DOMContentLoaded\", function () {\n                var classes = document.getElementsByTagName('body')[0].classList.add('view-ready');\n                self.render();\n            });\n        }\n    }\n\n    /**\n     * Generates a new ID that can be used for a view.\n     * @returns {String}\n     */\n    static newid() {\n        let id = Randomization.newid();\n        return id;\n    }\n\n    /**\n     * Adds a viewmodel to this one and renders under the specified element.\n     * @param {String} mvvm - The name of the mvvm to load.\n     * @param {String|HTMLElement} element \n     * @param {String} [id] - Optional id of the viewmodel entry. If not specified, a random value is chosen.\n     */\n    add(mvvm, element, id) {\n        if (typeof mvvm !== 'string') {\n            throw new Error('Argument \"mvvm\" must be a string.');\n        }\n        if (typeof element === 'string') {\n            element = document.querySelector(element);\n        }\n        if (element instanceof HTMLElement === false) {\n            throw new Error('Argument \"element\" was not an HTMLElement or could not be found by selector query.');\n        }\n        //locate and load the view and view-model into the element.\n        var mvvmDir = path.resolve(path.join(path.dirname(this.fileName), '..', mvvm));\n\n        //look for a view-model file\n        let vmFilePath = path.join(mvvmDir, 'view-model.js');\n        if (fs.existsSync(vmFilePath)) {\n            //setup\n            if (this.children == null || Array.isArray(this.children) === false) {\n                this.children = [];\n            }\n            var id = (id || ViewModel.newid());\n            if (this.contains(id)) {\n                throw new Error('The id specified is already in use.');\n            }\n            let div = document.createElement('div');\n            div.className = 'view view-' + mvvm;\n            div.innerHTML = fs.readFileSync(path.join(mvvmDir, 'view.html'), 'utf8');\n            div.id = 'view-' + id;\n            div.setAttribute('data-view-model-id', id);\n            //insert into the element\n            element.appendChild(div);\n            element.className = \"active-\" + mvvm;\n            //autoload and setup the view-model\n            let viewmodel = require(vmFilePath).init();\n            viewmodel.id = id\n            viewmodel.parent = this;\n            viewmodel.element = div;\n            //add the view-model to this view-model's children\n            this.children.push(viewmodel);\n            //check if the document ready-state has already fired\n            if (window && window.document) {\n                if (document.getElementsByTagName('body')[0].classList.contains('view-ready')) {\n                    viewmodel.render();\n                }\n            }\n            return viewmodel;\n        }\n        throw new Error(`A view-model could not be found under the mvvm \"${mvvm}\"`);\n    }\n\n    /**\n     * Removes a child viewmodel by the viewmodel id or instance.\n     * @param {String|ViewModel} vmid - The id of the viewmodel or a viewmodel instance.\n     * @returns {Boolean} - Returns true if a viewmodel was found and removed. \n     */\n    remove(vmid) {\n        if (this.children) {\n            var isObj = (typeof vmid === 'object');\n            for (var x = 0; x < this.children.length; x++) {\n                if ((isObj && vmid == this.children[x]) || (isObj === false && this.children[x].id === vmid)) {\n                    this.children[x].teardown();\n                    this.children.splice(x, 1);\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Removes all child viewmodels.\n     */\n    removeAll() {\n        if (this.children) {\n            for (var x = 0; x < this.children.length; x++) {\n                this.children[x].teardown();\n            }\n            this.children.length = 0;\n        }\n    }\n\n    /**\n     * Checks if the given child viewmodel exists by the viewmodel id or instance.\n     * @param {String|ViewModel} vmid - The id of the viewmodel or a viewmodel instance.\n     * @returns {Boolean}\n     */\n    contains(vmid) {\n        if (this.children) {\n            var isObj = (typeof vmid === 'object');\n            for (var x = 0; x < this.children.length; x++) {\n                if ((isObj && vmid == this.children[x]) || (isObj === false && this.children[x].id === vmid)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Called by a viewmodel parent when the view is about to be removed from the collection. \n     */\n    teardown() {\n        //delete the containing html element\n        if (this.element) {\n            this.element.remove();\n        }\n        //clear the parent\n        this.parent = null;\n    }\n\n}","import ViewModel from '../view-model.js';\n\nexport default class AboutViewModel extends ViewModel {\n    constructor() {\n        super();\n    }\n\n    static init() {\n        return new AboutViewModel();\n    }\n\n    render() { }\n\n}","\n// const path = require('path');\n// const fs = require('fs');\n\n//find the loading mvvm directory\n//let mvvmDir = path.dirname(window.location.href.substring('file://'.length + __dirname.length + 1));\n//look for a view-model.js file, if found, load and init it.\n// let vmFilePath = path.join(__dirname, mvvmDir, 'view-model.js');\n// if (fs.existsSync(vmFilePath)) {\n//     require(vmFilePath).init();\n// }\n\nimport AboutViewModel from './about/view-model.js';\n\nAboutViewModel.init();"],"names":[],"mappings":"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"}